
<!DOCTYPE html>
<html>
  <head>
    <title>Platformer | RangerRhino23</title>
    <link rel="icon" type="image/x-icon" href="icon.ico">
  </head>
  <script>
    document.addEventListener('contextmenu', event => event.preventDefault());
    document.onkeydown = function (event) {
    if (event.keyCode == 123) {
        return false;}}
    document.addEventListener('keydown', function(event) {
    if (event.shiftKey) {
        return false;}});
  </script>
  
    <script src="taptapir/taptapir.js"></script>
    <script type="text/sunsnake">

#Global Functions
ASSETS_FOLDER = 'assets/'
set_orientation('landscape')
set_background_color('rgb(210,180,140)')
set_window_color('rgb(23,23,23)')
set_scale(1.0)


#Variables
jumping = False
collider_objects = []
gravity = 0
velocity = 0
speed = 0.005
ground=0
colliding=False


#Block Class
def Block(x=0,y=0,texture='textures/grass_side.png'):
    return Entity(x=x,y=y,z=player.z,texture=texture, scale=0.05,ypos=y+.05)


def update():
    print(player.y)
    sky.x = camera.x * 1
    sky.y = camera.y * 1
    camera.x = lerp(camera.x, player.x, .025)
    camera.y = lerp(camera.y, player.y+.2, .025)
    for e in collider_objects:
        if e.x>0:
            if player.y>=e.ypos and player.x>=e.x-.05 and player.x<=e.x+.05:
                ground=e.ypos
            else:
                ground = 0
        elif e.x<0:
            if player.y>=e.ypos and player.x>=e.x+.05 and player.x<=e.x-.05:
                ground=e.ypos
            else:
                ground = 0  

    #Start Player Movement
    if held_keys['d'] and not colliding:
        player.x += speed
        player.texture='textures/player_right.png'
    if held_keys['a'] and not colliding:
        player.x -= speed
        player.texture='textures/player_left.png'

    if velocity <= 0:
        if player.y >= ground:
            gravity += 0.0005
            player.y -= 0.001 + gravity
        if player.y <= ground:
            jumping=False
            player.y=ground
    if velocity>0:
        player.y+=velocity/60
        velocity-=.1
    if held_keys['shift']:
        player.x += (held_keys['d'] - held_keys['a']) * speed
    #End Player Movement

def input(key):
    if key == 'space' and not jumping:
        ground=player.y
        velocity = 1.2
        gravity = 0
        jumping = True

player = Entity(texture='textures/player_right.png', scale=0.05)
sky = Entity(texture='textures/sky.png', scale=[1.8,1.005], z=10)
temp = Block(x=0.2)
collider_objects.append(temp)
block = Block(x=0.25)
collider_objects.append(block)
    </script><script src="taptapir/sunsnake_compiler.js"></script></html>